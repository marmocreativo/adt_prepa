{"version":3,"sources":["js/node_modules/browser-pack/_prelude.js","js/src/ts/file-tree.ts"],"names":[],"mappings":"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","file":"file-tree.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","class fileTree {\r\n    currentFolderId: string;\r\n    extTypes: object;\r\n    fileTypes: Array<string>;\r\n    foldersContent: Array<any>;\r\n    icons: any;\r\n    jsonTree: any;\r\n    options: any;\r\n    scriptSrc: string;\r\n    targetId: string;\r\n    template: any = null;\r\n\r\n    treeMarkup: string = '';\r\n\r\n    constructor(targetId: string, options: any = {}) {\r\n        this.targetId = targetId;\r\n\r\n        const defaults = {\r\n            connector: 'php',\r\n            // available modes: list | grid\r\n            explorerMode: 'list',\r\n            extensions: ['.*'],\r\n            mainDir: 'demo-files',\r\n            maxDeph: 3,\r\n            cancelBtn: true,\r\n            okBtn: true,\r\n            template: 'bootstrap4',\r\n            elementClick: function (filePath: string, fileName: string) {\r\n                console.log(filePath);\r\n                console.log(fileName);\r\n            },\r\n            cancelBtnClick: function () {\r\n                console.log('Cancel');\r\n            },\r\n            okBtnClick: function (filePath: string, fileName: string) {\r\n                console.log(filePath);\r\n                console.log(fileName);\r\n            }\r\n        };\r\n        this.options = Object.assign({}, defaults, options);\r\n\r\n        this.icons = {\r\n            archive: 'ft-icon-file-zip',\r\n            excel: 'ft-icon-file-excel',\r\n            folder: 'ft-icon-folder',\r\n            folderOpen: 'ft-icon-folder-open',\r\n            html: 'ft-icon-html-five2',\r\n            image: 'ft-icon-file-picture',\r\n            music: 'ft-icon-file-music',\r\n            openoffice: 'ft-icon-file-openoffice',\r\n            pdf: 'ft-icon-file-pdf',\r\n            text: 'ft-icon-file-text2',\r\n            video: 'ft-icon-file-video',\r\n            word: 'ft-icon-file-word',\r\n            default: 'ft-icon-file-empty'\r\n        };\r\n        this.foldersContent = new Array();\r\n        this.fileTypes = Object.keys(this.icons);\r\n        this.extTypes = {\r\n            archive: ['7z', '7-Zip', 'arj', 'deb', 'pkg', 'rar', 'rpm', 'tar.gz', 'z', 'zip'],\r\n            excel: ['xls', 'xlsx'],\r\n            html: ['htm', 'html'],\r\n            image: ['bmp', 'gif', 'jpg', 'jpeg', 'png', 'svg', 'tif', 'tiff', 'webp'],\r\n            music: ['aif', 'mp3', 'mpa', 'ogg', 'wav', 'wma'],\r\n            openoffice: ['odt', 'ott', 'odm', 'ods', 'ots', 'odg', 'otg', 'odp', 'otp', 'odf', 'odc', 'odb'],\r\n            pdf: ['pdf'],\r\n            text: ['rtf', 'tex', 'txt'],\r\n            video: ['3g2', '3gp', 'avi', 'flv', 'h264', 'm4v', 'mkv', 'mov', 'mp4', 'mpg', 'rm', 'swf', 'vob', 'wmv'],\r\n            word: ['doc', 'docx']\r\n        }\r\n\r\n        this.scriptSrc = this.getScriptScr();\r\n\r\n        this.getFiles()\r\n        .then((data: string) => {\r\n            this.jsonTree = JSON.parse(data);\r\n            this.buildTree();\r\n            this.render();\r\n        })\r\n        .catch((err) => {\r\n            console.error('Augh, there was an error!', err.statusText);\r\n        });\r\n    }\r\n\r\n    public render() {\r\n        const $targetId = document.getElementById(this.targetId);\r\n        this.loadCss();\r\n        $targetId.querySelectorAll('.ft-tree')[0].innerHTML = this.treeMarkup;\r\n        const folders = $targetId.querySelectorAll('.ft-tree .ft-folder');\r\n        Array.prototype.forEach.call(folders, (el: HTMLElement, i: number) => {\r\n            el.addEventListener('click', (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n\r\n                // get all the parent folders\r\n                const parents = this.parentsUntil(el, 'ft-folder', 'ft-' + this.targetId + '-root');\r\n\r\n                // open all the parent folders, close the others\r\n                Array.prototype.forEach.call(folders, (folder: HTMLElement, i: number) => {\r\n                    const ic = folder.querySelector('i');\r\n                    if (parents.indexOf(folder) > -1) {\r\n                        folder.classList.add('ft-folder-open');\r\n                        ic.classList.remove(this.icons.folder);\r\n                        ic.classList.add(this.icons.folderOpen);\r\n                    } else {\r\n                        folder.classList.remove('ft-folder-open');\r\n                        ic.classList.add(this.icons.folder);\r\n                        ic.classList.remove(this.icons.folderOpen);\r\n                    }\r\n                });\r\n                this.currentFolderId = el.getAttribute('id');\r\n                this.loadFolder(this.currentFolderId);\r\n                return false;\r\n            });\r\n        });\r\n        // load the root folder explorer content\r\n        this.currentFolderId = 'ft-' + this.targetId + '-root';\r\n        this.loadFolder(this.currentFolderId);\r\n    }\r\n\r\n    /**\r\n    * Load js-tree + icon lib CSS\r\n    */\r\n    private loadCss() {\r\n        const ftIcons = document.getElementById('ft-icons');\r\n        if (ftIcons == undefined) {\r\n            const linkElement = document.createElement('link');\r\n            linkElement.setAttribute('id', 'ft-icons');\r\n            linkElement.setAttribute('rel', 'stylesheet');\r\n            linkElement.setAttribute('type', 'text/css');\r\n            linkElement.setAttribute('href', this.scriptSrc + 'icons/style.css');\r\n            document.getElementsByTagName('head')[0].appendChild(linkElement);\r\n        }\r\n        const ftCss = document.getElementById('ft-styles');\r\n        if (ftCss == undefined) {\r\n            const linkElement = document.createElement('link');\r\n            linkElement.setAttribute('id', 'ft-styles');\r\n            linkElement.setAttribute('rel', 'stylesheet');\r\n            linkElement.setAttribute('type', 'text/css');\r\n            linkElement.setAttribute('href', this.scriptSrc + 'templates/' + this.options.template + '.css');\r\n            document.getElementsByTagName('head')[0].appendChild(linkElement);\r\n        }\r\n    }\r\n\r\n    private buildFolderContent(jst: Array<string> = this.jsonTree, url: string, deph: number) {\r\n        const folderContent: any = {\r\n            folders: [],\r\n            files: []\r\n        }\r\n        for (let key in jst) {\r\n            let value: any = jst[key];\r\n            if (isNaN(parseInt(key))) {\r\n                // directory\r\n                folderContent.folders.push({\r\n                    dataRefId: key + '-' + (deph + 1).toString(),\r\n                    name: key,\r\n                    url: url + key + '/'\r\n                });\r\n            } else {\r\n                // file\r\n                const filedata = value;\r\n                Object.assign(filedata, { type: this.getFileType(filedata.ext) });\r\n                const icon: string = this.icons[filedata.type];\r\n                if (filedata.type === 'image') {\r\n                    folderContent.files.push({\r\n                        name: filedata.name,\r\n                        icon: icon,\r\n                        type: filedata.type,\r\n                        url: url + filedata.name,\r\n                        width: null,\r\n                        height: null\r\n                    });\r\n                } else {\r\n                    folderContent.files.push({\r\n                        name: filedata.name,\r\n                        icon: icon,\r\n                        size: filedata.size,\r\n                        type: filedata.type,\r\n                        url: url + filedata.name\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        return folderContent;\r\n    }\r\n\r\n    private buildTree(jst: Array<string> = this.jsonTree, url: string = this.options.mainDir + '/', deph: number = 0) {\r\n        if (deph === 0) {\r\n            const rootId: any = 'ft-' + this.targetId + '-root';\r\n            this.treeMarkup += `<ul><li id=\"${rootId}\" class=\"ft-folder ft-folder-open\"><i class=\"${this.icons.folderOpen}\"></i><a href=\"#\" data-url=\"${url}\">root</a>`;\r\n            this.foldersContent[rootId] = this.buildFolderContent(this.jsonTree, url, deph);\r\n            deph += 1;\r\n        }\r\n        for (let key in jst) {\r\n            let jsonSubTree: any = jst[key];\r\n            if (isNaN(parseInt(key))) {\r\n                // directory\r\n                const folderId: any = key + '-' + deph.toString();\r\n\r\n                this.foldersContent[folderId] = this.buildFolderContent(jsonSubTree, url + key + '/', deph);\r\n                this.treeMarkup += `<ul><li id=\"${folderId}\" class=\"ft-folder\"><i class=\"${this.icons.folder}\"></i><a href=\"#\" data-url=\"${url + key}\">${key}</a>`;\r\n                if (deph < this.options.maxDeph) {\r\n                    this.buildTree(jsonSubTree, url + key + '/', deph + 1);\r\n                }\r\n                this.treeMarkup += `</li></ul>`;\r\n            }\r\n        }\r\n        if (deph === 0) {\r\n            this.treeMarkup += `</li></ul>`;\r\n        }\r\n    }\r\n\r\n    private getFileType(ext: string) {\r\n        const x: any = this.extTypes;\r\n        for (let key in x) {\r\n            let value: any = x[key];\r\n            if (value.indexOf(ext) !== -1) {\r\n\r\n                return key;\r\n            }\r\n        }\r\n\r\n        return 'default';\r\n    }\r\n\r\n    private getFiles() {\r\n        return new Promise((resolve, reject) => {\r\n            let xhr = new XMLHttpRequest();\r\n            xhr.open('POST', this.scriptSrc + 'connectors/connector.' + this.options.connector, true);\r\n            xhr.onload = function () {\r\n                // console.log(xhr.response);\r\n                if (this.status >= 200 && this.status < 300) {\r\n                    resolve(xhr.response);\r\n                } else {\r\n                    reject({\r\n                        status: this.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                reject({\r\n                    status: this.status,\r\n                    statusText: xhr.statusText\r\n                });\r\n            };\r\n            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\r\n            xhr.send('dir=' + encodeURI(this.options.mainDir) + '&ext=' + JSON.stringify(this.options.extensions));\r\n        });\r\n    }\r\n\r\n    private getScriptScr() {\r\n        const sc = document.getElementsByTagName(\"script\");\r\n\r\n        for (let idx = 0; idx < sc.length; idx++) {\r\n            const s = sc.item(idx);\r\n\r\n            if (s.src && s.src.match(/file-tree(\\.min)?\\.js$/)) {\r\n                return s.src.replace(/js\\/file-tree(\\.min)?\\.js$/, '');\r\n            }\r\n        }\r\n    }\r\n\r\n    private humanFileSize(bytes: number, si: boolean) {\r\n        var thresh = si ? 1000 : 1024;\r\n        if(Math.abs(bytes) < thresh) {\r\n            return bytes + ' B';\r\n        }\r\n        var units = si\r\n            ? ['kB','MB','GB','TB','PB','EB','ZB','YB']\r\n            : ['KiB','MiB','GiB','TiB','PiB','EiB','ZiB','YiB'];\r\n        var u = -1;\r\n        do {\r\n            bytes /= thresh;\r\n            ++u;\r\n        } while(Math.abs(bytes) >= thresh && u < units.length - 1);\r\n        return bytes.toFixed(1)+' '+units[u];\r\n    }\r\n\r\n    private loadFolder(folderId: any) {\r\n        const $targetId = document.getElementById(this.targetId);\r\n        const folderContent = this.foldersContent[folderId];\r\n        let clone: any;\r\n        let output: any;\r\n        this.loadTemplates().then((template: any) => {\r\n            this.template = template;\r\n            const folders = folderContent.folders;\r\n            const files = folderContent.files;\r\n\r\n            let explorerContainer: HTMLTemplateElement;\r\n            let explorerFile: HTMLTemplateElement;\r\n            let explorerFolder: HTMLTemplateElement;\r\n            let explorerImage: HTMLTemplateElement;\r\n            let explorerActionBtns: HTMLTemplateElement;\r\n            let explorerMode: HTMLTemplateElement;\r\n\r\n            explorerActionBtns = document.querySelector('#explorer-action-btns');\r\n            const explorerActionBtnsClone = explorerActionBtns.content.cloneNode(true);\r\n\r\n            explorerMode = document.querySelector('#explorer-mode');\r\n            const explorerModeClone = explorerMode.content.cloneNode(true);\r\n\r\n            switch (this.options.explorerMode) {\r\n                case 'list':\r\n                explorerContainer = document.querySelector('#explorer-list');\r\n                explorerFile = document.querySelector('#explorer-list-file');\r\n                explorerFolder = document.querySelector('#explorer-list-folder');\r\n                explorerImage = document.querySelector('#explorer-list-image');\r\n                output = explorerContainer.content.querySelector('.ft-explorer-list-container').cloneNode(true);\r\n\r\n                break;\r\n\r\n                case 'grid':\r\n                explorerContainer = document.querySelector('#explorer-grid');\r\n                explorerFile = document.querySelector('#explorer-grid-file');\r\n                explorerFolder = document.querySelector('#explorer-grid-folder');\r\n                explorerImage = document.querySelector('#explorer-grid-image');\r\n                output = explorerContainer.content.querySelector('.ft-explorer-grid-container').cloneNode(true);\r\n\r\n                break;\r\n\r\n                default:\r\n                break;\r\n            }\r\n\r\n            for (let key in folders) {\r\n                let folder: any = folders[key];\r\n                clone = explorerFolder.content.cloneNode(true);\r\n                clone.querySelector('.ft-folder').setAttribute('data-href', folder.dataRefId);\r\n                clone.querySelector('.ft-folder i').classList.add(this.icons.folder);\r\n                clone.querySelector('.ft-foldername').innerHTML = folder.name;\r\n                output.appendChild(clone);\r\n            }\r\n\r\n            for (let key in files) {\r\n                let file: any = files[key];\r\n                if (file.type === 'image') {\r\n                    let cloneId = Math.random().toString(36).substr(2, 9);\r\n                    clone = explorerImage.content.cloneNode(true);\r\n                    clone.querySelector('.ft-imagedesc').setAttribute('id', cloneId);\r\n                    clone.querySelector('.ft-image').setAttribute('data-href', file.url);\r\n                    clone.querySelector('.ft-image').setAttribute('data-filename', file.name);\r\n                    clone.querySelector('.ft-image img').setAttribute('src', file.url);\r\n                    clone.querySelector('.ft-imagename').innerHTML = file.name;\r\n                    output.appendChild(clone);\r\n                    let img = new Image();\r\n                    img.src = file.url;\r\n                    img.onload = () => {\r\n                        let el:HTMLElement = document.getElementById(cloneId);\r\n                        el.querySelector('.ft-image-size').innerHTML = img.width.toString() + 'x' + img.height.toString() + 'px';\r\n                    };\r\n                } else {\r\n                    clone = explorerFile.content.cloneNode(true);\r\n                    clone.querySelector('.ft-file').setAttribute('data-href', file.url);\r\n                    clone.querySelector('.ft-file').setAttribute('data-filename', file.name);\r\n                    clone.querySelector('.ft-file i').classList.add(file.icon);\r\n                    clone.querySelector('.ft-filename').innerHTML = file.name;\r\n                    clone.querySelector('.ft-filesize').innerHTML = this.humanFileSize(file.size, true);\r\n                    output.appendChild(clone);\r\n                }\r\n            }\r\n            $targetId.querySelector('.ft-explorer').innerHTML = '';\r\n            $targetId.querySelector('.ft-explorer').appendChild(explorerModeClone);\r\n            $targetId.querySelector('.ft-explorer').appendChild(output);\r\n            if (this.options.okBtn === true || this.options.cancelBtn === true) {\r\n                $targetId.querySelector('.ft-explorer').appendChild(explorerActionBtnsClone);\r\n                if (this.options.okBtn !== true) {\r\n                    $targetId.querySelector('.explorer-ok-btn').remove();\r\n                }\r\n                if (this.options.cancelBtn !== true) {\r\n                    $targetId.querySelector('.explorer-cancel-btn').remove();\r\n                }\r\n                if (this.options.okBtn === true) {\r\n                    $targetId.querySelector('.explorer-ok-btn').addEventListener('click', (e: any) => {\r\n                        e.preventDefault();\r\n                        const target: any = $targetId.querySelector('.ft-file-container.active a');\r\n                        if (target !== null) {\r\n                            const targetFilename = target.getAttribute('data-filename');\r\n                            const targetHref = target.getAttribute('data-href');\r\n                            this.options.okBtnClick(targetHref, targetFilename);\r\n                        } else {\r\n                            alert('Nothing selected');\r\n                        }\r\n\r\n                        return false;\r\n                    }, false);\r\n                }\r\n                if (this.options.cancelBtn === true) {\r\n                    $targetId.querySelector('.explorer-cancel-btn').addEventListener('click', (e: any) => {\r\n                        e.preventDefault();\r\n                        this.options.cancelBtnClick();\r\n\r\n                        return false;\r\n                    }, false);\r\n                }\r\n            }\r\n\r\n            const modeBtns = Array.from($targetId.querySelectorAll('.ft-explorer-mode .explorer-mode-btn'));\r\n\r\n            /* add explorer mode buttons events & activate the current btn */\r\n\r\n            modeBtns.forEach(m => {\r\n                if (m.getAttribute('value') === this.options.explorerMode) {\r\n                    m.classList.add('active');\r\n                }\r\n                m.addEventListener('click', (e: any) => {\r\n                    this.switchMode();\r\n                    this.loadFolder(folderId);\r\n                });\r\n            });\r\n\r\n            /* add explorer elements events */\r\n\r\n            const elements = Array.from($targetId.querySelectorAll('.ft-explorer a[data-href]'));\r\n            const elementContainers = Array.from($targetId.querySelectorAll('.ft-explorer .ft-file-container'));\r\n            elements.forEach(el => {\r\n                el.addEventListener('click', (e: any) => {\r\n                    e.preventDefault();\r\n                    elementContainers.forEach(elContainer => {\r\n                        elContainer.classList.remove('active');\r\n                    });\r\n                    const target: any = e.target.closest('a');\r\n                    if (target.closest('.ft-file-container') !== null) {\r\n                        target.closest('.ft-file-container').classList.add('active');\r\n                        const targetFilename = target.getAttribute('data-filename');\r\n                        const targetHref = target.getAttribute('data-href');\r\n                        this.options.elementClick(targetHref, targetFilename);\r\n                    }\r\n\r\n                    return false;\r\n                }, false);\r\n            });\r\n\r\n            /* add explorer folder events */\r\n            const links = Array.from($targetId.querySelectorAll('.ft-explorer a.ft-folder'));\r\n            links.forEach(l => {\r\n                l.addEventListener('click', (e: any) => {\r\n                    e.preventDefault();\r\n                    const target: any = e.target.closest('a');\r\n                    const targetId = target.getAttribute('data-href');\r\n                    if (targetId !== null) {\r\n                        var event = document.createEvent('HTMLEvents');\r\n                        event.initEvent('click', true, false);\r\n                        document.getElementById(targetId).dispatchEvent(event);\r\n                    }\r\n\r\n                    return false;\r\n                }, false);\r\n            });\r\n\r\n        })\r\n        .catch((err) => {\r\n            console.error('Augh, there was an error!', err.statusText);\r\n        });\r\n    }\r\n\r\n    private loadTemplates() {\r\n        return new Promise((resolve, reject) => {\r\n            if (this.template !== null) {\r\n                resolve(this.template);\r\n            } else {\r\n                const ftMode = this.options.explorerMode;\r\n                let xhr = new XMLHttpRequest();\r\n                xhr.open('GET', this.scriptSrc + 'templates/' + this.options.template + '.html', true);\r\n                xhr.onload = function () {\r\n                    // console.log(xhr.response);\r\n                    if (this.status >= 200 && this.status < 300) {\r\n                        if (document.querySelectorAll('#explorer-' + ftMode).length < 1) {\r\n                            const div = document.createElement('div');\r\n                            div.innerHTML = xhr.response;\r\n                            while (div.children.length > 0) {\r\n                                document.body.appendChild(div.children[0]);\r\n                            }\r\n                        }\r\n                        resolve(xhr.response);\r\n                    } else {\r\n                        reject({\r\n                            status: this.status,\r\n                            statusText: xhr.statusText\r\n                        });\r\n                    }\r\n                };\r\n                xhr.onerror = function () {\r\n                    reject({\r\n                        status: this.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                };\r\n                xhr.send();\r\n            }\r\n        });\r\n    }\r\n\r\n    private parentsUntil(el: any, searchClass: string, stopElementId: string) {\r\n        const Parents = new Array();\r\n        while (el.parentNode) {\r\n            if (el.classList.contains(searchClass)) {\r\n                Parents.push(el);\r\n            }\r\n            el = el.parentNode;\r\n            if (el.id === stopElementId) {\r\n                Parents.push(el);\r\n                return Parents;\r\n            }\r\n        }\r\n        return Parents;\r\n    }\r\n\r\n    private switchMode() {\r\n        if (this.options.explorerMode === 'list') {\r\n            this.options.explorerMode = 'grid';\r\n        } else {\r\n            this.options.explorerMode = 'list';\r\n        }\r\n    }\r\n}\r\n\r\nObject.assign(window, { fileTree });\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdHMvZmlsZS10cmVlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUEsTUFBTSxRQUFRO0lBY1YsWUFBWSxRQUFnQixFQUFFLFVBQWUsRUFBRTtRQUovQyxhQUFRLEdBQVEsSUFBSSxDQUFDO1FBRXJCLGVBQVUsR0FBVyxFQUFFLENBQUM7UUFHcEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFFekIsTUFBTSxRQUFRLEdBQUc7WUFDYixTQUFTLEVBQUUsS0FBSztZQUNoQiwrQkFBK0I7WUFDL0IsWUFBWSxFQUFFLE1BQU07WUFDcEIsVUFBVSxFQUFFLENBQUMsSUFBSSxDQUFDO1lBQ2xCLE9BQU8sRUFBRSxZQUFZO1lBQ3JCLE9BQU8sRUFBRSxDQUFDO1lBQ1YsU0FBUyxFQUFFLElBQUk7WUFDZixLQUFLLEVBQUUsSUFBSTtZQUNYLFFBQVEsRUFBRSxZQUFZO1lBQ3RCLFlBQVksRUFBRSxVQUFVLFFBQWdCLEVBQUUsUUFBZ0I7Z0JBQ3RELE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ3RCLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDMUIsQ0FBQztZQUNELGNBQWMsRUFBRTtnQkFDWixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzFCLENBQUM7WUFDRCxVQUFVLEVBQUUsVUFBVSxRQUFnQixFQUFFLFFBQWdCO2dCQUNwRCxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUN0QixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzFCLENBQUM7U0FDSixDQUFDO1FBQ0YsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFcEQsSUFBSSxDQUFDLEtBQUss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QUM7SUFFTyxZQUFZLENBQUMsRUFBTyxFQUFFLFdBQW1CLEVBQUUsYUFBcUI7UUFDcEUsTUFBTSxPQUFPLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztRQUM1QixPQUFPLEVBQUUsQ0FBQyxVQUFVLEVBQUU7WUFDbEIsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRTtnQkFDcEMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQzthQUNwQjtZQUNELEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDO1lBQ25CLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxhQUFhLEVBQUU7Z0JBQ3pCLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2pCLE9BQU8sT0FBTyxDQUFDO2FBQ2xCO1NBQ0o7UUFDRCxPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDO0lBRU8sVUFBVTtRQUNkLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEtBQUssTUFBTSxFQUFFO1lBQ3RDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztTQUN0QzthQUFNO1lBQ0gsSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDO1NBQ3RDO0lBQ0wsQ0FBQztDQUNKO0FBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiY2xhc3MgZmlsZVRyZWUge1xyXG4gICAgY3VycmVudEZvbGRlcklkOiBzdHJpbmc7XHJcbiAgICBleHRUeXBlczogb2JqZWN0O1xyXG4gICAgZmlsZVR5cGVzOiBBcnJheTxzdHJpbmc+O1xyXG4gICAgZm9sZGVyc0NvbnRlbnQ6IEFycmF5PGFueT47XHJcbiAgICBpY29uczogYW55O1xyXG4gICAganNvblRyZWU6IGFueTtcclxuICAgIG9wdGlvbnM6IGFueTtcclxuICAgIHNjcmlwdFNyYzogc3RyaW5nO1xyXG4gICAgdGFyZ2V0SWQ6IHN0cmluZztcclxuICAgIHRlbXBsYXRlOiBhbnkgPSBudWxsO1xyXG5cclxuICAgIHRyZWVNYXJrdXA6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRhcmdldElkOiBzdHJpbmcsIG9wdGlvbnM6IGFueSA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHRhcmdldElkO1xyXG5cclxuICAgICAgICBjb25zdCBkZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgY29ubmVjdG9yOiAncGhwJyxcclxuICAgICAgICAgICAgLy8gYXZhaWxhYmxlIG1vZGVzOiBsaXN0IHwgZ3JpZFxyXG4gICAgICAgICAgICBleHBsb3Jlck1vZGU6ICdsaXN0JyxcclxuICAgICAgICAgICAgZXh0ZW5zaW9uczogWycuKiddLFxyXG4gICAgICAgICAgICBtYWluRGlyOiAnZGVtby1maWxlcycsXHJcbiAgICAgICAgICAgIG1heERlcGg6IDMsXHJcbiAgICAgICAgICAgIGNhbmNlbEJ0bjogdHJ1ZSxcclxuICAgICAgICAgICAgb2tCdG46IHRydWUsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnYm9vdHN0cmFwNCcsXHJcbiAgICAgICAgICAgIGVsZW1lbnRDbGljazogZnVuY3Rpb24gKGZpbGVQYXRoOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVOYW1lKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2FuY2VsQnRuQ2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYW5jZWwnKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb2tCdG5DbGljazogZnVuY3Rpb24gKGZpbGVQYXRoOiBzdHJpbmcsIGZpbGVOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB0aGlzLmljb25zID0ge1xyXG4gICAgICAgICAgICBhcmNoaXZlOiAnZnQtaWNvbi1maWxlLXppcCcsXHJcbiAgICAgICAgICAgIGV4Y2VsOiAnZnQtaWNvbi1maWxlLWV4Y2VsJyxcclxuICAgICAgICAgICAgZm9sZGVyOiAnZnQtaWNvbi1mb2xkZXInLFxyXG4gICAgICAgICAgICBmb2xkZXJPcGVuOiAnZnQtaWNvbi1mb2xkZXItb3BlbicsXHJcbiAgICAgICAgICAgIGh0bWw6ICdmdC1pY29uLWh0bWwtZml2ZTInLFxyXG4gICAgICAgICAgICBpbWFnZTogJ2Z0LWljb24tZmlsZS1waWN0dXJlJyxcclxuICAgICAgICAgICAgbXVzaWM6ICdmdC1pY29uLWZpbGUtbXVzaWMnLFxyXG4gICAgICAgICAgICBvcGVub2ZmaWNlOiAnZnQtaWNvbi1maWxlLW9wZW5vZmZpY2UnLFxyXG4gICAgICAgICAgICBwZGY6ICdmdC1pY29uLWZpbGUtcGRmJyxcclxuICAgICAgICAgICAgdGV4dDogJ2Z0LWljb24tZmlsZS10ZXh0MicsXHJcbiAgICAgICAgICAgIHZpZGVvOiAnZnQtaWNvbi1maWxlLXZpZGVvJyxcclxuICAgICAgICAgICAgd29yZDogJ2Z0LWljb24tZmlsZS13b3JkJyxcclxuICAgICAgICAgICAgZGVmYXVsdDogJ2Z0LWljb24tZmlsZS1lbXB0eSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZm9sZGVyc0NvbnRlbnQgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB0aGlzLmZpbGVUeXBlcyA9IE9iamVjdC5rZXlzKHRoaXMuaWNvbnMpO1xyXG4gICAgICAgIHRoaXMuZXh0VHlwZXMgPSB7XHJcbiAgICAgICAgICAgIGFyY2hpdmU6IFsnN3onLCAnNy1aaXAnLCAnYXJqJywgJ2RlYicsICdwa2cnLCAncmFyJywgJ3JwbScsICd0YXIuZ3onLCAneicsICd6aXAnXSxcclxuICAgICAgICAgICAgZXhjZWw6IFsneGxzJywgJ3hsc3gnXSxcclxuICAgICAgICAgICAgaHRtbDogWydodG0nLCAnaHRtbCddLFxyXG4gICAgICAgICAgICBpbWFnZTogWydibXAnLCAnZ2lmJywgJ2pwZycsICdqcGVnJywgJ3BuZycsICdzdmcnLCAndGlmJywgJ3RpZmYnLCAnd2VicCddLFxyXG4gICAgICAgICAgICBtdXNpYzogWydhaWYnLCAnbXAzJywgJ21wYScsICdvZ2cnLCAnd2F2JywgJ3dtYSddLFxyXG4gICAgICAgICAgICBvcGVub2ZmaWNlOiBbJ29kdCcsICdvdHQnLCAnb2RtJywgJ29kcycsICdvdHMnLCAnb2RnJywgJ290ZycsICdvZHAnLCAnb3RwJywgJ29kZicsICdvZGMnLCAnb2RiJ10sXHJcbiAgICAgICAgICAgIHBkZjogWydwZGYnXSxcclxuICAgICAgICAgICAgdGV4dDogWydydGYnLCAndGV4JywgJ3R4dCddLFxyXG4gICAgICAgICAgICB2aWRlbzogWyczZzInLCAnM2dwJywgJ2F2aScsICdmbHYnLCAnaDI2NCcsICdtNHYnLCAnbWt2JywgJ21vdicsICdtcDQnLCAnbXBnJywgJ3JtJywgJ3N3ZicsICd2b2InLCAnd212J10sXHJcbiAgICAgICAgICAgIHdvcmQ6IFsnZG9jJywgJ2RvY3gnXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zY3JpcHRTcmMgPSB0aGlzLmdldFNjcmlwdFNjcigpO1xyXG5cclxuICAgICAgICB0aGlzLmdldEZpbGVzKClcclxuICAgICAgICAudGhlbigoZGF0YTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuanNvblRyZWUgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkVHJlZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQXVnaCwgdGhlcmUgd2FzIGFuIGVycm9yIScsIGVyci5zdGF0dXNUZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIGNvbnN0ICR0YXJnZXRJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudGFyZ2V0SWQpO1xyXG4gICAgICAgIHRoaXMubG9hZENzcygpO1xyXG4gICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yQWxsKCcuZnQtdHJlZScpWzBdLmlubmVySFRNTCA9IHRoaXMudHJlZU1hcmt1cDtcclxuICAgICAgICBjb25zdCBmb2xkZXJzID0gJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mdC10cmVlIC5mdC1mb2xkZXInKTtcclxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGZvbGRlcnMsIChlbDogSFRNTEVsZW1lbnQsIGk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGdldCBhbGwgdGhlIHBhcmVudCBmb2xkZXJzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRzID0gdGhpcy5wYXJlbnRzVW50aWwoZWwsICdmdC1mb2xkZXInLCAnZnQtJyArIHRoaXMudGFyZ2V0SWQgKyAnLXJvb3QnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBvcGVuIGFsbCB0aGUgcGFyZW50IGZvbGRlcnMsIGNsb3NlIHRoZSBvdGhlcnNcclxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZm9sZGVycywgKGZvbGRlcjogSFRNTEVsZW1lbnQsIGk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGljID0gZm9sZGVyLnF1ZXJ5U2VsZWN0b3IoJ2knKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50cy5pbmRleE9mKGZvbGRlcikgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXIuY2xhc3NMaXN0LmFkZCgnZnQtZm9sZGVyLW9wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWMuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLmljb25zLmZvbGRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljLmNsYXNzTGlzdC5hZGQodGhpcy5pY29ucy5mb2xkZXJPcGVuKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXIuY2xhc3NMaXN0LnJlbW92ZSgnZnQtZm9sZGVyLW9wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWMuY2xhc3NMaXN0LmFkZCh0aGlzLmljb25zLmZvbGRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5pY29ucy5mb2xkZXJPcGVuKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZvbGRlcklkID0gZWwuZ2V0QXR0cmlidXRlKCdpZCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkRm9sZGVyKHRoaXMuY3VycmVudEZvbGRlcklkKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gbG9hZCB0aGUgcm9vdCBmb2xkZXIgZXhwbG9yZXIgY29udGVudFxyXG4gICAgICAgIHRoaXMuY3VycmVudEZvbGRlcklkID0gJ2Z0LScgKyB0aGlzLnRhcmdldElkICsgJy1yb290JztcclxuICAgICAgICB0aGlzLmxvYWRGb2xkZXIodGhpcy5jdXJyZW50Rm9sZGVySWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBMb2FkIGpzLXRyZWUgKyBpY29uIGxpYiBDU1NcclxuICAgICovXHJcbiAgICBwcml2YXRlIGxvYWRDc3MoKSB7XHJcbiAgICAgICAgY29uc3QgZnRJY29ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmdC1pY29ucycpO1xyXG4gICAgICAgIGlmIChmdEljb25zID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcclxuICAgICAgICAgICAgbGlua0VsZW1lbnQuc2V0QXR0cmlidXRlKCdpZCcsICdmdC1pY29ucycpO1xyXG4gICAgICAgICAgICBsaW5rRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3JlbCcsICdzdHlsZXNoZWV0Jyk7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0L2NzcycpO1xyXG4gICAgICAgICAgICBsaW5rRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCB0aGlzLnNjcmlwdFNyYyArICdpY29ucy9zdHlsZS5jc3MnKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChsaW5rRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGZ0Q3NzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Z0LXN0eWxlcycpO1xyXG4gICAgICAgIGlmIChmdENzcyA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgY29uc3QgbGlua0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnNldEF0dHJpYnV0ZSgnaWQnLCAnZnQtc3R5bGVzJyk7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnNldEF0dHJpYnV0ZSgncmVsJywgJ3N0eWxlc2hlZXQnKTtcclxuICAgICAgICAgICAgbGlua0VsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQvY3NzJyk7XHJcbiAgICAgICAgICAgIGxpbmtFbGVtZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsIHRoaXMuc2NyaXB0U3JjICsgJ3RlbXBsYXRlcy8nICsgdGhpcy5vcHRpb25zLnRlbXBsYXRlICsgJy5jc3MnKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChsaW5rRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRGb2xkZXJDb250ZW50KGpzdDogQXJyYXk8c3RyaW5nPiA9IHRoaXMuanNvblRyZWUsIHVybDogc3RyaW5nLCBkZXBoOiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCBmb2xkZXJDb250ZW50OiBhbnkgPSB7XHJcbiAgICAgICAgICAgIGZvbGRlcnM6IFtdLFxyXG4gICAgICAgICAgICBmaWxlczogW11cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIGpzdCkge1xyXG4gICAgICAgICAgICBsZXQgdmFsdWU6IGFueSA9IGpzdFtrZXldO1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4ocGFyc2VJbnQoa2V5KSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGRpcmVjdG9yeVxyXG4gICAgICAgICAgICAgICAgZm9sZGVyQ29udGVudC5mb2xkZXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFSZWZJZDoga2V5ICsgJy0nICsgKGRlcGggKyAxKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCArIGtleSArICcvJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmaWxlXHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlZGF0YSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihmaWxlZGF0YSwgeyB0eXBlOiB0aGlzLmdldEZpbGVUeXBlKGZpbGVkYXRhLmV4dCkgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpY29uOiBzdHJpbmcgPSB0aGlzLmljb25zW2ZpbGVkYXRhLnR5cGVdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVkYXRhLnR5cGUgPT09ICdpbWFnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb2xkZXJDb250ZW50LmZpbGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWxlZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpY29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBmaWxlZGF0YS50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCArIGZpbGVkYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG51bGxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9sZGVyQ29udGVudC5maWxlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsZWRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaWNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZWRhdGEuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogZmlsZWRhdGEudHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwgKyBmaWxlZGF0YS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb2xkZXJDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYnVpbGRUcmVlKGpzdDogQXJyYXk8c3RyaW5nPiA9IHRoaXMuanNvblRyZWUsIHVybDogc3RyaW5nID0gdGhpcy5vcHRpb25zLm1haW5EaXIgKyAnLycsIGRlcGg6IG51bWJlciA9IDApIHtcclxuICAgICAgICBpZiAoZGVwaCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCByb290SWQ6IGFueSA9ICdmdC0nICsgdGhpcy50YXJnZXRJZCArICctcm9vdCc7XHJcbiAgICAgICAgICAgIHRoaXMudHJlZU1hcmt1cCArPSBgPHVsPjxsaSBpZD1cIiR7cm9vdElkfVwiIGNsYXNzPVwiZnQtZm9sZGVyIGZ0LWZvbGRlci1vcGVuXCI+PGkgY2xhc3M9XCIke3RoaXMuaWNvbnMuZm9sZGVyT3Blbn1cIj48L2k+PGEgaHJlZj1cIiNcIiBkYXRhLXVybD1cIiR7dXJsfVwiPnJvb3Q8L2E+YDtcclxuICAgICAgICAgICAgdGhpcy5mb2xkZXJzQ29udGVudFtyb290SWRdID0gdGhpcy5idWlsZEZvbGRlckNvbnRlbnQodGhpcy5qc29uVHJlZSwgdXJsLCBkZXBoKTtcclxuICAgICAgICAgICAgZGVwaCArPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4ganN0KSB7XHJcbiAgICAgICAgICAgIGxldCBqc29uU3ViVHJlZTogYW55ID0ganN0W2tleV07XHJcbiAgICAgICAgICAgIGlmIChpc05hTihwYXJzZUludChrZXkpKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0b3J5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmb2xkZXJJZDogYW55ID0ga2V5ICsgJy0nICsgZGVwaC50b1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZm9sZGVyc0NvbnRlbnRbZm9sZGVySWRdID0gdGhpcy5idWlsZEZvbGRlckNvbnRlbnQoanNvblN1YlRyZWUsIHVybCArIGtleSArICcvJywgZGVwaCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyZWVNYXJrdXAgKz0gYDx1bD48bGkgaWQ9XCIke2ZvbGRlcklkfVwiIGNsYXNzPVwiZnQtZm9sZGVyXCI+PGkgY2xhc3M9XCIke3RoaXMuaWNvbnMuZm9sZGVyfVwiPjwvaT48YSBocmVmPVwiI1wiIGRhdGEtdXJsPVwiJHt1cmwgKyBrZXl9XCI+JHtrZXl9PC9hPmA7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVwaCA8IHRoaXMub3B0aW9ucy5tYXhEZXBoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZFRyZWUoanNvblN1YlRyZWUsIHVybCArIGtleSArICcvJywgZGVwaCArIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50cmVlTWFya3VwICs9IGA8L2xpPjwvdWw+YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGVwaCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnRyZWVNYXJrdXAgKz0gYDwvbGk+PC91bD5gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZpbGVUeXBlKGV4dDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgeDogYW55ID0gdGhpcy5leHRUeXBlcztcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4geCkge1xyXG4gICAgICAgICAgICBsZXQgdmFsdWU6IGFueSA9IHhba2V5XTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLmluZGV4T2YoZXh0KSAhPT0gLTEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJ2RlZmF1bHQnO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZ2V0RmlsZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIHRoaXMuc2NyaXB0U3JjICsgJ2Nvbm5lY3RvcnMvY29ubmVjdG9yLicgKyB0aGlzLm9wdGlvbnMuY29ubmVjdG9yLCB0cnVlKTtcclxuICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHhoci5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04Jyk7XHJcbiAgICAgICAgICAgIHhoci5zZW5kKCdkaXI9JyArIGVuY29kZVVSSSh0aGlzLm9wdGlvbnMubWFpbkRpcikgKyAnJmV4dD0nICsgSlNPTi5zdHJpbmdpZnkodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldFNjcmlwdFNjcigpIHtcclxuICAgICAgICBjb25zdCBzYyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBzYy5sZW5ndGg7IGlkeCsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHMgPSBzYy5pdGVtKGlkeCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocy5zcmMgJiYgcy5zcmMubWF0Y2goL2ZpbGUtdHJlZShcXC5taW4pP1xcLmpzJC8pKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcy5zcmMucmVwbGFjZSgvanNcXC9maWxlLXRyZWUoXFwubWluKT9cXC5qcyQvLCAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBodW1hbkZpbGVTaXplKGJ5dGVzOiBudW1iZXIsIHNpOiBib29sZWFuKSB7XHJcbiAgICAgICAgdmFyIHRocmVzaCA9IHNpID8gMTAwMCA6IDEwMjQ7XHJcbiAgICAgICAgaWYoTWF0aC5hYnMoYnl0ZXMpIDwgdGhyZXNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBieXRlcyArICcgQic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB1bml0cyA9IHNpXHJcbiAgICAgICAgICAgID8gWydrQicsJ01CJywnR0InLCdUQicsJ1BCJywnRUInLCdaQicsJ1lCJ11cclxuICAgICAgICAgICAgOiBbJ0tpQicsJ01pQicsJ0dpQicsJ1RpQicsJ1BpQicsJ0VpQicsJ1ppQicsJ1lpQiddO1xyXG4gICAgICAgIHZhciB1ID0gLTE7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBieXRlcyAvPSB0aHJlc2g7XHJcbiAgICAgICAgICAgICsrdTtcclxuICAgICAgICB9IHdoaWxlKE1hdGguYWJzKGJ5dGVzKSA+PSB0aHJlc2ggJiYgdSA8IHVuaXRzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIHJldHVybiBieXRlcy50b0ZpeGVkKDEpKycgJyt1bml0c1t1XTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWRGb2xkZXIoZm9sZGVySWQ6IGFueSkge1xyXG4gICAgICAgIGNvbnN0ICR0YXJnZXRJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMudGFyZ2V0SWQpO1xyXG4gICAgICAgIGNvbnN0IGZvbGRlckNvbnRlbnQgPSB0aGlzLmZvbGRlcnNDb250ZW50W2ZvbGRlcklkXTtcclxuICAgICAgICBsZXQgY2xvbmU6IGFueTtcclxuICAgICAgICBsZXQgb3V0cHV0OiBhbnk7XHJcbiAgICAgICAgdGhpcy5sb2FkVGVtcGxhdGVzKCkudGhlbigodGVtcGxhdGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGZvbGRlcnMgPSBmb2xkZXJDb250ZW50LmZvbGRlcnM7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZm9sZGVyQ29udGVudC5maWxlcztcclxuXHJcbiAgICAgICAgICAgIGxldCBleHBsb3JlckNvbnRhaW5lcjogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IGV4cGxvcmVyRmlsZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IGV4cGxvcmVyRm9sZGVyOiBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgZXhwbG9yZXJJbWFnZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IGV4cGxvcmVyQWN0aW9uQnRuczogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IGV4cGxvcmVyTW9kZTogSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGV4cGxvcmVyQWN0aW9uQnRucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleHBsb3Jlci1hY3Rpb24tYnRucycpO1xyXG4gICAgICAgICAgICBjb25zdCBleHBsb3JlckFjdGlvbkJ0bnNDbG9uZSA9IGV4cGxvcmVyQWN0aW9uQnRucy5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIGV4cGxvcmVyTW9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleHBsb3Jlci1tb2RlJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cGxvcmVyTW9kZUNsb25lID0gZXhwbG9yZXJNb2RlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLm9wdGlvbnMuZXhwbG9yZXJNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdsaXN0JzpcclxuICAgICAgICAgICAgICAgIGV4cGxvcmVyQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGxvcmVyLWxpc3QnKTtcclxuICAgICAgICAgICAgICAgIGV4cGxvcmVyRmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNleHBsb3Jlci1saXN0LWZpbGUnKTtcclxuICAgICAgICAgICAgICAgIGV4cGxvcmVyRm9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGxvcmVyLWxpc3QtZm9sZGVyJyk7XHJcbiAgICAgICAgICAgICAgICBleHBsb3JlckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGxvcmVyLWxpc3QtaW1hZ2UnKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dCA9IGV4cGxvcmVyQ29udGFpbmVyLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmZ0LWV4cGxvcmVyLWxpc3QtY29udGFpbmVyJykuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ2dyaWQnOlxyXG4gICAgICAgICAgICAgICAgZXhwbG9yZXJDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwbG9yZXItZ3JpZCcpO1xyXG4gICAgICAgICAgICAgICAgZXhwbG9yZXJGaWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2V4cGxvcmVyLWdyaWQtZmlsZScpO1xyXG4gICAgICAgICAgICAgICAgZXhwbG9yZXJGb2xkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwbG9yZXItZ3JpZC1mb2xkZXInKTtcclxuICAgICAgICAgICAgICAgIGV4cGxvcmVySW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZXhwbG9yZXItZ3JpZC1pbWFnZScpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gZXhwbG9yZXJDb250YWluZXIuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZnQtZXhwbG9yZXItZ3JpZC1jb250YWluZXInKS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gZm9sZGVycykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZvbGRlcjogYW55ID0gZm9sZGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgY2xvbmUgPSBleHBsb3JlckZvbGRlci5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5mdC1mb2xkZXInKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicsIGZvbGRlci5kYXRhUmVmSWQpO1xyXG4gICAgICAgICAgICAgICAgY2xvbmUucXVlcnlTZWxlY3RvcignLmZ0LWZvbGRlciBpJykuY2xhc3NMaXN0LmFkZCh0aGlzLmljb25zLmZvbGRlcik7XHJcbiAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtZm9sZGVybmFtZScpLmlubmVySFRNTCA9IGZvbGRlci5uYW1lO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LmFwcGVuZENoaWxkKGNsb25lKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGZpbGVzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsZTogYW55ID0gZmlsZXNba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChmaWxlLnR5cGUgPT09ICdpbWFnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2xvbmVJZCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IGV4cGxvcmVySW1hZ2UuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUucXVlcnlTZWxlY3RvcignLmZ0LWltYWdlZGVzYycpLnNldEF0dHJpYnV0ZSgnaWQnLCBjbG9uZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtaW1hZ2UnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicsIGZpbGUudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtaW1hZ2UnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtZmlsZW5hbWUnLCBmaWxlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5mdC1pbWFnZSBpbWcnKS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGZpbGUudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtaW1hZ2VuYW1lJykuaW5uZXJIVE1MID0gZmlsZS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5hcHBlbmRDaGlsZChjbG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSBmaWxlLnVybDtcclxuICAgICAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWw6SFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjbG9uZUlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvcignLmZ0LWltYWdlLXNpemUnKS5pbm5lckhUTUwgPSBpbWcud2lkdGgudG9TdHJpbmcoKSArICd4JyArIGltZy5oZWlnaHQudG9TdHJpbmcoKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUgPSBleHBsb3JlckZpbGUuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUucXVlcnlTZWxlY3RvcignLmZ0LWZpbGUnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicsIGZpbGUudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtZmlsZScpLnNldEF0dHJpYnV0ZSgnZGF0YS1maWxlbmFtZScsIGZpbGUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUucXVlcnlTZWxlY3RvcignLmZ0LWZpbGUgaScpLmNsYXNzTGlzdC5hZGQoZmlsZS5pY29uKTtcclxuICAgICAgICAgICAgICAgICAgICBjbG9uZS5xdWVyeVNlbGVjdG9yKCcuZnQtZmlsZW5hbWUnKS5pbm5lckhUTUwgPSBmaWxlLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvbmUucXVlcnlTZWxlY3RvcignLmZ0LWZpbGVzaXplJykuaW5uZXJIVE1MID0gdGhpcy5odW1hbkZpbGVTaXplKGZpbGUuc2l6ZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmFwcGVuZENoaWxkKGNsb25lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkdGFyZ2V0SWQucXVlcnlTZWxlY3RvcignLmZ0LWV4cGxvcmVyJykuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yKCcuZnQtZXhwbG9yZXInKS5hcHBlbmRDaGlsZChleHBsb3Jlck1vZGVDbG9uZSk7XHJcbiAgICAgICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yKCcuZnQtZXhwbG9yZXInKS5hcHBlbmRDaGlsZChvdXRwdXQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9rQnRuID09PSB0cnVlIHx8IHRoaXMub3B0aW9ucy5jYW5jZWxCdG4gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yKCcuZnQtZXhwbG9yZXInKS5hcHBlbmRDaGlsZChleHBsb3JlckFjdGlvbkJ0bnNDbG9uZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9rQnRuICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3IoJy5leHBsb3Jlci1vay1idG4nKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2FuY2VsQnRuICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3IoJy5leHBsb3Jlci1jYW5jZWwtYnRuJykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm9rQnRuID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3IoJy5leHBsb3Jlci1vay1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQ6IGFueSA9ICR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yKCcuZnQtZmlsZS1jb250YWluZXIuYWN0aXZlIGEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RmlsZW5hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWZpbGVuYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRIcmVmID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub2tCdG5DbGljayh0YXJnZXRIcmVmLCB0YXJnZXRGaWxlbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnTm90aGluZyBzZWxlY3RlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jYW5jZWxCdG4gPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0SWQucXVlcnlTZWxlY3RvcignLmV4cGxvcmVyLWNhbmNlbC1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuY2FuY2VsQnRuQ2xpY2soKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGVCdG5zID0gQXJyYXkuZnJvbSgkdGFyZ2V0SWQucXVlcnlTZWxlY3RvckFsbCgnLmZ0LWV4cGxvcmVyLW1vZGUgLmV4cGxvcmVyLW1vZGUtYnRuJykpO1xyXG5cclxuICAgICAgICAgICAgLyogYWRkIGV4cGxvcmVyIG1vZGUgYnV0dG9ucyBldmVudHMgJiBhY3RpdmF0ZSB0aGUgY3VycmVudCBidG4gKi9cclxuXHJcbiAgICAgICAgICAgIG1vZGVCdG5zLmZvckVhY2gobSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgPT09IHRoaXMub3B0aW9ucy5leHBsb3Jlck1vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaE1vZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRGb2xkZXIoZm9sZGVySWQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLyogYWRkIGV4cGxvcmVyIGVsZW1lbnRzIGV2ZW50cyAqL1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudHMgPSBBcnJheS5mcm9tKCR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yQWxsKCcuZnQtZXhwbG9yZXIgYVtkYXRhLWhyZWZdJykpO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50Q29udGFpbmVycyA9IEFycmF5LmZyb20oJHRhcmdldElkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mdC1leHBsb3JlciAuZnQtZmlsZS1jb250YWluZXInKSk7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRDb250YWluZXJzLmZvckVhY2goZWxDb250YWluZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQ6IGFueSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2EnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoJy5mdC1maWxlLWNvbnRhaW5lcicpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCcuZnQtZmlsZS1jb250YWluZXInKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RmlsZW5hbWUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWZpbGVuYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEhyZWYgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmVsZW1lbnRDbGljayh0YXJnZXRIcmVmLCB0YXJnZXRGaWxlbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLyogYWRkIGV4cGxvcmVyIGZvbGRlciBldmVudHMgKi9cclxuICAgICAgICAgICAgY29uc3QgbGlua3MgPSBBcnJheS5mcm9tKCR0YXJnZXRJZC5xdWVyeVNlbGVjdG9yQWxsKCcuZnQtZXhwbG9yZXIgYS5mdC1mb2xkZXInKSk7XHJcbiAgICAgICAgICAgIGxpbmtzLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICBsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQ6IGFueSA9IGUudGFyZ2V0LmNsb3Nlc3QoJ2EnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRJZCA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaHJlZicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5pbml0RXZlbnQoJ2NsaWNrJywgdHJ1ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXRJZCkuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1Z2gsIHRoZXJlIHdhcyBhbiBlcnJvciEnLCBlcnIuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBsb2FkVGVtcGxhdGVzKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnRlbXBsYXRlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMudGVtcGxhdGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZnRNb2RlID0gdGhpcy5vcHRpb25zLmV4cGxvcmVyTW9kZTtcclxuICAgICAgICAgICAgICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB0aGlzLnNjcmlwdFNyYyArICd0ZW1wbGF0ZXMvJyArIHRoaXMub3B0aW9ucy50ZW1wbGF0ZSArICcuaHRtbCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNleHBsb3Jlci0nICsgZnRNb2RlKS5sZW5ndGggPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSB4aHIucmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoZGl2LmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdi5jaGlsZHJlblswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh4aHIucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcGFyZW50c1VudGlsKGVsOiBhbnksIHNlYXJjaENsYXNzOiBzdHJpbmcsIHN0b3BFbGVtZW50SWQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IFBhcmVudHMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICB3aGlsZSAoZWwucGFyZW50Tm9kZSkge1xyXG4gICAgICAgICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKHNlYXJjaENsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgUGFyZW50cy5wdXNoKGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgIGlmIChlbC5pZCA9PT0gc3RvcEVsZW1lbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgUGFyZW50cy5wdXNoKGVsKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQYXJlbnRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQYXJlbnRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc3dpdGNoTW9kZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmV4cGxvcmVyTW9kZSA9PT0gJ2xpc3QnKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5leHBsb3Jlck1vZGUgPSAnZ3JpZCc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmV4cGxvcmVyTW9kZSA9ICdsaXN0JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbk9iamVjdC5hc3NpZ24od2luZG93LCB7IGZpbGVUcmVlIH0pO1xyXG4iXX0="}